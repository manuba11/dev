<!DOCTYPE html>
<html lang="ja">
<!-- Write with HTML5-->
<head>
<title>Learning Javascript</title>
<meta charset="UTF-8" />
<!--
https://www.junoe.jp/downloads/itoh/enc_js.shtml
外部のJavascriptを読み込む場合にはscriptタグ内で読み込む
複数ある場合には同じような記述をもう一つ入れる
-->
<script type = "text/javascript" src = "ecl.js"> </script>

</head>
<body>
    <h1>価格チェック</h1>
    <h2>kakaku.comで調べる</h2>

    <!--
    <h3>docuent.write([テキスト])</h3>
    <div id="t1"></div>
    -->

    <h3 alt = "Search for kakaku.com with the keywords.">キーワード</h3>
    検索したいキーワードを入力してください。<p>
    <!-- Please enter search keywords here.-->
    <form id = "form1">
        <input type = "text" id = "tboxText" value = "" onkeydown = "fncTBoxEnter()">
        <input type = "submit" id = "btnChg" value = "押す" onClick = "fncClickButton()"><p>
    </form>
    <div id="t2"></div>










    <script>
        var urlKakakucom = "http://kakaku.com/search_results/";
        var urlAddChar = "/?act=sp"; //これ何だろう？

        //テキストボックス上でEnterキーが押された時の処理
        //Formの入力イベントをチェックしてEnterのキーコードであればsubmit()を呼びだす。
        var fncTBoxEnter = function()
        {
            if(window.event.keycode==13)
            {
                document.forms.form1.tboxText.submit();
            }
        }

        var fncClickButton = function()
        {
            var tArea = document.getElementById("t2");
            var strKeyword = document.forms.form1.tboxText.value;
            var strError = "There are no keywords. Please enter the keywords.";

            console.log(document.forms.form1.tboxText.value);
            if(strKeyword != "")
            {
                tArea.innerHTML = urlKakakucom + EscapeSJIS(strKeyword) + urlAddChar;
                //console.log(tArea.innerHTML);
                //location.href = tArea.innerHTML;
                window.open(tArea.innerHTML, '_blank');
            }
            else {
                tArea.innerHTML = strError;
            }
        }
    </script>
</body>
</html>

